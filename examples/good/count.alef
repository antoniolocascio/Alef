(* Count number of prints. *)

count : unit<Print | mu> ->> nat<mu>
count = handler 
          val x -> val 0,
          {Print x k -> let a = k () in val (succ a)};;

main : nat<mu>
main = with count handle 
  (let x = Print(1) in 
   let y = Print(2) in
   if false then Print(3) else val ())